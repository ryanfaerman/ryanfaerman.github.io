

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta charset="utf-8"/>
  
  <title> Ryan Faerman </title>
  
  <link rel="stylesheet" href="https://www.ryanfaerman.com/tufte.css"/>
  <link rel="stylesheet" href="https://www.ryanfaerman.com/main.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <style type="text/css">
   img { mix-blend-mode: multiply; }
  </style>

  <meta name="generator" content="Hugo 0.24.1" />
  
    <link href="https://www.ryanfaerman.com/index.xml" rel="alternate feed" type="application/rss+xml" title="Ryan Faerman" />
  
</head>
<body>

  <header class="header" role="banner">
    <div class="header-inner">
      <ul class="nav">
        <li class="nav-item">
          <a class="home" href="/">
            <i class="fa fa-home"></i>
          </a>
        </li>
      </ul>

      <ul class="nav external pull-right">
        <li class="nav-item">
          <a href="https://www.linkedin.com/in/ryanfaerman">
            <i class="fa fa-linkedin"></i>
          </a>
          <a href="https://github.com/ryanfaerman">
            <i class="fa fa-github-alt"></i>
          </a>
          <a href="https://www.flickr.com/photos/ryanfaerman/">
            <i class="fa fa-flickr"></i>
          </a>
        </li>
      </ul>
    </div>
  </header>


<div class="hero">
  <div class="hero-inner">
    <div class="hero-copy">
      <h1>My name is Ryan Faerman</h1>
      <p>I make &amp; break things &ndash; usually code and sometimes wood</p>
    </div>
  </div>
</div>


  <article >
    <h1>
      <a href="https://www.ryanfaerman.com/post/becoming-carpenter/">Becoming a Carpenter</a>
    </h1>
    <p>When my wife and I were looking for our first home, she joked with our realtor, &ldquo;I&rsquo;m looking for a house, my husband is just looking for a garage&rdquo;. While not entirely true, it definitely had a source in truth. I grew up helping my Dad in the garage shop and I even had my own work bench that I never could keep organized.</p>

<p>I&rsquo;ve always felt that a home has two hearts<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">Just like a Timelord</span>
: the kitchen and the garage. When we bought our home, one of the first things I did was turn the garage into my shop. I started collecting tools for both home repair and to start building things from wood.</p>

<p>As a developer, I&rsquo;ve learned to be pragmatic in regards to my skillset. Before having my own shop, I never really had a constant opportunity to practice woodcraft. I had built a few of my desks<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">From scratch, not from Ikea. <br/> One of my later desks was actually good enough to give to my Sister when she needed a table.</span>
 and a bookshelf or two, but nothing created at the quality level I wanted. I knew then that I could do better.</p>

<hr />

<p>Mother&rsquo;s day was only a few weeks after we moved into our home, we were having a family brunch and we needed a table for the patio.</p>

<p>Still feeling bruised from making the down payment, I threw together a rough table from some wood I reclaimed<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">I even reused most of the screws too! How&rsquo;s that for recycling?</span>
 from a rickety shelving unit that came with the house.</p>

<p>Despite being thrown together one evening after work in the week before the party, the table served us well for several years and many patio meals.</p>

<p>I was never truly satisfied with the quick and dirty table. The joinery was rough, the edges were harsh, and it always required a table cloth to cover its less than beautiful tabletop.</p>

<hr />

<p>Every year in the fall, we celebrate <a href="https://en.wikipedia.org/wiki/Sukkot">Succot</a> by building a Succah.<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">My Dad and I always put lots of thought into our Succah. Sometimes even planning it right after Passover, roughly six months beforehand.<br/><br/>It&rsquo;s like an excuse to build a fort every year.</span>
 I tend to use regular 2x4s and then, after the holiday, I end up with a pile of lumber begging for a project.</p>

<p>The first year, I used the lumber to create a pair of wooden patio swings. These are still hanging in our patio and are one of my favorite places to take a nap. I modified some simple plans I found and banged them out pretty quick.</p>

<p>The second year, I stepped up my game when I ditched the Ikea table I was using as a desk and made a new one built into my closet. I hadn&rsquo;t really learned how to joint boards together properly so I focused on how to get a really nice lacquer finish. The desk won&rsquo;t win any awards, but I&rsquo;m pleased with how it turned out.</p>

<p>With the finishing skills from the desk, a recently purchased planer, and another piece of disposable Ikea furniture to replace, I had my next project &ndash; a new end table. This was the first project that I consider actual furniture.</p>

<p>It&rsquo;s nothing fancy.</p>

<p><img src="/assets/side-table.jpg" alt="end table" /></p>

<p>Just a simple table with simple angles. But it proved to me that I could actually make something nice.</p>

<p>I continued making random things. I made a few dice, a shelf, a couple frames. But I wanted something bigger. I wanted to make a full table. With summer coming to a close, and coming off a high of binge-watching some Wood Whisperer<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote"><a href="http://www.thewoodwhisperer.com">The Wood Whisperer</a> has lots of great content. With most of his videos, even though I haven&rsquo;t made what he has, he makes it seem attainable.</span>
 videos, I decided that I was going to make a cedar table<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">Specifically, the <a href="http://www.thewoodwhisperer.com/videos/the-not-so-rustic-rustic-outdoor-table/">Rustic Outdoor Table</a> from The Wood Whisperer.</span>
 for the patio.</p>

<p>With Succos being just a couple months away, I gave myself a deadline. The first use of the table would be in our Succah.</p>

<p>The first trip to Home Depot<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">I know there are better and cheaper ways to get lumber, but I can&rsquo;t usually get to the one or two lumber yards in the county. They have strange hours and I wasn&rsquo;t going to take a day from work just to make the trip.</span>
 for rough cedar proved to be a challenge &ndash; they didn&rsquo;t have enough in the dimensions I wanted that also was in the required quality. I ended up going to a few different stores throughout the project to get everything and I had to modify the plans slightly to compensate for the lumber I could get.</p>

<p>With the lumber purchased and taking up precious space in the garage, I got to work.</p>

<p>Each night, after my daughter went to sleep, I&rsquo;d change into my overalls and spend a few hours in the garage. Each night I&rsquo;d make a little progress milling and preparing the pieces for a sub-assembly. I&rsquo;d put these assemblies aside to work on the next piece.</p>

<p>On each Sunday, after my daughter&rsquo;s swimming lessons and after some family time, I&rsquo;d spent 6 or 8 hours in the garage. These days let me make large strides, completing tasks like jointing the boards for the tabletop or leveling the tabletop and benches.</p>

<p>This continued for about three weeks and in the end, I had a completed table, delivered on time. I&rsquo;d enjoyed every minute of the project and in the end, I created a piece of furniture that will last a lifetime.</p>

<p><img src="/assets/cedar-table-angled.jpg" alt="outdoor table" /></p>

<hr />

<p>After Succos, I dragged the old table out to the street corner. Within a few hours I got a knock on the door. A man wanted to take the table and to make sure I was really throwing it away. Things with a purpose tend to survive, even when we don&rsquo;t intend them to.</p>

<p>With the patio cleared, my Dad helped me move the new table and benches to the patio where they have been serving us well.</p>

<p>We use the table frequently &ndash; breakfast on weekends and other meals when it&rsquo;s cool enough. It feels like we use it more than the previous table. I&rsquo;m not sure if that&rsquo;s because of its novelty or because it&rsquo;s a table that works better for us.</p>

<p>It&rsquo;s a source of pride too. I&rsquo;ve had many people ask me where I bought it; when they find out I made it they are amazed. I didn&rsquo;t make it to get compliments, but that&rsquo;s a nice bonus.</p>

<p>So far, I&rsquo;ve used most of the lumber from Succos to make toys. I&rsquo;ve made a handful of wooden cars for my daughter and a set of giant jenga set for us. There are a few boards left that aren&rsquo;t earmarked for anything in particular.</p>

<p>I&rsquo;m sure I&rsquo;ll find a use for them.</p>

    <hr class="ookiaks" />
  </article>


  <article >
    <h1>
      <a href="https://www.ryanfaerman.com/post/migrating-to-hugo/">Migrating to Hugo</a>
    </h1>
    

<p>I like to play with different technology to build websites. And, like a mad scientist, I generally experiment on myself and my own site.</p>

<p>My website was fairly recently powered by Middleman<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">Middleman is great and all but I&rsquo;ve become a gopher. <br /><img src="/assets/gopher-with-flag.png" alt="a happy gopher" /></span>
 and now it isn&rsquo;t. I&rsquo;ve moved everything over to use Hugo instead.</p>

<p>Hugo is pretty neat. Other than being written in Go, it&rsquo;s also distributed as a single binary without any external dependency. I don&rsquo;t need to get a ruby environment setup<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">Don&rsquo;t get me wrong, I like ruby but if you&rsquo;ve ever had to <a href="http://devblog.avdi.org/2015/08/11/what-its-like-to-come-back-to-a-ruby-project-after-6-months/">resolve dependency conflicts</a>, you know what I&rsquo;m talking about.</span>
 or fight with any dependencies.</p>

<p>Hugo, like the Middleman, Jekyll, and nanoc I used before it, is a static site generator. Despite being a software engineer and working daily operating an internal cloud, I&rsquo;ve come to really appreciate having a pile of files. I can serve this with just about any web server with little or no configuration.</p>

<p>As an added bonus, since there isn&rsquo;t any server-side generation, just about any server could handle an incredible amount of traffic.</p>

<p>I&rsquo;m a realist, I know that no one is really looking at my content.<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">Except you. You&rsquo;re a somebody&hellip; yea!</span>
 I don&rsquo;t create it for most people, I write it mostly for myself. Knowing that, I want to spend as little as possible to host my personal site. The less it costs the better. To that end, I&rsquo;m hosting this site on Amazon S3 and fronting it with CloudFront.</p>

<p>Yes. Using CloudFront for my little site is overkill but it&rsquo;s the best way I could come up with to serve everything over SSL.<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">Come on! <a href="https://letsencrypt.org">Let&rsquo;s Encrypt</a> already!</span>
</p>

<h2 id="built-on-the-shoulders-of-giants">Built on the Shoulders of Giants</h2>

<p>First, we have the design of the site. I was greatly inspired by <a href="https://edwardtufte.github.io/tufte-css/">Tufte-css</a>; when I first saw that page I was blown away by the typography and especially the side notes. I felt that the design supported the type of writing that I enjoy, where I can interject<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">Saving literally dozens of dollars on parentheses and dashes. Punctuation doesn&rsquo;t grow on trees you know!</span>
 into my own writing.</p>

<p>A pretty face only gets you so far.</p>

<p>With the design and content generation figured out, it was time to get this up to Amazon S3. In line with the style of Hugo, I pulled two more tools off the shelf:  <a href="https://github.com/s3tools/s3cmd">s3cmd</a> and <a href="https://github.com/aws/aws-cli">awscli</a>.</p>

<p>Sprinkle in a bit of bash<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/>
<span class="sidenote">Based off the work by <a href="http://imperialwicket.com/automatically-deploy-hugo-to-s3-and-cloudfront/">Nicholas Whitter</a>.</span>
, I now had a git post-commit hook done that:</p>

<ol>
<li>Compiles the site with hugo</li>
<li>Uploads the site to Amazon S3</li>
<li>Purges the <code>index.html</code> file from CloudFront</li>
</ol>

<h2 id="done-for-now">Done for now</h2>

<p>Just like this wasn&rsquo;t the first iteration of my site, this won&rsquo;t be the last. After all the journey is most of the fun with this stuff.</p>

    <hr class="ookiaks" />
  </article>


  <article >
    <h1>
      <a href="https://www.ryanfaerman.com/post/coral-springs-a-fractured-community/">A Fractured Community</a>
    </h1>
    

<p>I&rsquo;ve been working on this post for a few weeks now &ndash; even longer in my head. This is a difficult topic for me to post but I feel compelled. There are too many rumors and half-truths floating about in the my community; I can&rsquo;t sit by while a problem festers.</p>

<p>I&rsquo;ve written this so there is at least a record of where I stand on things and maybe even a little bit of the why too.</p>

<h2 id="some-background">Some Background</h2>

<p>I live in Coral Springs and have been part of the <a href="http://www.coralspringschabad.org">Chabad community</a> for many years. I&rsquo;ve lived in the city for longer, but my family and I really started getting close to Judaism about 15 years ago. Before going to the Chabad, we attended a local reform temple.</p>

<p>The story, as I understand it, started when my Dad found his Father&rsquo;s tefillin and wanted to put them on. He asked the Rabbi of the reform temple and the Rabbi didn&rsquo;t know how.</p>

<p>Coral Springs, like most cities, doesn&rsquo;t have much competition in the way of observant jewry. It&rsquo;s either Chabad or nothing. That&rsquo;s a subject of another discussion &ndash; it&rsquo;s neither good nor bad, it just is.</p>

<p>My Dad went over the the Chabad (it was just down the street) and they not only knew how, they helped him. The Rabbis were open and warm, the community close, and we got hooked.</p>

<p>The rest as they say was history. We grew closer to judaism. I went to a jewish day school. We made our home kosher. And now I&rsquo;m now a Torah-observant Jew with my own kosher home.</p>

<p>My family helped establish this community and we helped fund the construction of the building.</p>

<p>Growing up and becoming closer to Judaism in this community gives me a unique perspective to criticize it.</p>

<h2 id="noticing-the-change">Noticing the Change</h2>

<p>The community transformed from one of outreach and warmth to one of severity and closed-mindedness. I know this didn&rsquo;t happen overnight. It has been a gradual process. I was just too involved with my own life and self-delusions (we all have them) to notice until it has gotten so far gone that I couldn&rsquo;t help but notice.</p>

<p>Instead of an environment of acceptance and growth where whatever you&rsquo;re doing is better than what you were, new-comers are insulted and demeaned. I know this is true because I invited a friend of mine to come join the minyan during Succot.</p>

<p>My friend arrived before I did and walked in. He was welcomed by someone saying &ldquo;What&rsquo;s wrong with you, why are you wearing jeans?&rdquo; followed by a &ldquo;How dare you have a cell phone in your pocket!&rdquo;.</p>

<p>Instead of being happy that a jew walked in the door without being dragged, he was belittled and demeaned. That&rsquo;s entirely unacceptable &ndash; it&rsquo;s just not how you treat a fellow jew; it&rsquo;s not how you treat a person.</p>

<p>My friend left, went for a walk, and stopped by later to share his experience. I was upset and ashamed. These were the people that I called myself a part of; I trusted my friend to them.</p>

<h2 id="a-breakdown-of-respect">A Breakdown of Respect</h2>

<p>There&rsquo;s a general lack of respect in the community. A perfect example is the division during prayer. The sanctuary is generally divided into two groups, classes really.</p>

<p>The upper-class are in the front. They sit at tables, they usually are black hatters, and they generally wear the standard Chabad uniform. The lower-class sit at regular chairs in the back. They come from all walks of life and are at varying degrees of observance.</p>

<p>The tone at the shul is that if you don&rsquo;t keep the arbitrary standards of the front-dwellers, you&rsquo;re somehow a lesser Jew.</p>

<p>There is a general lack of respect for the building and its facilities by the community as a whole. There is even less respect from the people that use it the most.</p>

<p>Children push the adults out of the way for food, fill their entire plates, and then just throw it on the floor when they are done. Not every child does this, and not every kid is as bad &ndash; but it&rsquo;s an example and not far from the norm.</p>

<p>There&rsquo;s not really a single part of the building that hasn&rsquo;t received some attention from either my Dad or one of the few other community members that actually care about the building and its upkeep.</p>

<p>We&rsquo;ve patched walls that people have kicked, cabinet doors that kids ripped off the hinges, repainted walls after food stained them, replaced door hardware, and so much more. We&rsquo;ve had to replace the same things many times, not because they wore out, but because the same kid thought it&rsquo;d be fun to break again. The parents are never held responsible.</p>

<p>Even with all the work, the sanctuary still smells of mold and body odor. I think it absorbed into the drywall.</p>

<p>Along these lines, the mikvah is a disgrace. The water is not clean, everything smells like a terrible combination of mildew and bleach. There will be bugs, hair, and other things floating in the water.</p>

<p>My wife absolutely refuses to use it, and we live less than a mile away. Instead, she drives 25 minutes away to Plantation where there is a <a href="http://www.chabadplantation.com/templates/articlecco_cdo/aid/717267/jewish/Womens-Mikvah.htm">dedicated women&rsquo;s mikvah</a> and a group of people that actually care about it.</p>

<h2 id="mob-rule">Mob Rule</h2>

<p>Around the beginning of the year a friend of mine (we&rsquo;ll call him Frank) suspected that his child was abused at the day school. I can&rsquo;t say if abuse took place or not, only that it isn&rsquo;t impossible. I don&rsquo;t know if the claim had/has merit or not. The claim has nothing to do with me and I&rsquo;ve had to fight not to get pulled directly into it.</p>

<p>The only reason I mention this issue at all is because of the leadership (or lack thereof) and the reaction of the community and its members.</p>

<p>People in the community would come talk to me, demanding I stop talking with Frank. My wife would receive random calls from people trying to convince her that Frank and his family were bad people. They&rsquo;d also tell me that abuse was &ldquo;impossible&rdquo; because the teacher was above reproach.</p>

<p>Frank and his family had at least one community member come to their house and start screaming at them from the street. They would receive calls telling them to leave.</p>

<p>If anyone was a friend to Frank and they had kids in the school, they would be threatened with a raise in their tuition. Even worse, they&rsquo;d be threatened that their kids would be unable to get a shidduch.</p>

<p>If they taught at the school (or nearby schools) they were threatened with termination for not shunning Frank and his family.</p>

<p>Keep in mind that this entire time there was an on-going case in front of a Beis Din that hadn&rsquo;t ruled yet. The community attacked Frank and his family for weeks (months really) and this whole time, not a single Rabbi in the community thought it worth even addressing.</p>

<p>In fact, they (and more often their children) would instigate &ndash; I even had to stop a physical fight from breaking out!</p>

<h2 id="the-last-piece-of-straw">The last piece of straw</h2>

<p>With all that happened, I started to really pay attention to all that was transpiring. I&rsquo;d sit in shul and just watch the interactions between people.</p>

<p>It was second day of Shavuous and I had just arrived. I walked through the side gate and entered the court yard. I walked up to the doors to the sanctuary and started opening them.</p>

<p>I froze.</p>

<p>I couldn&rsquo;t bring myself to enter.</p>

<p>I ended up sitting in the succah (there was a tiny one that the kiddush club made in the back that stood year-round) for a few hours, thinking.</p>

<p>I had decided then and there, that I was done. It was time to just start a minyan at my house of people that feel the same as I did.</p>

<h2 id="how-is-this-all-relevant">How is this all relevant?</h2>

<p>After my second shabbos minyan, I received a phone call from Rabbi Denburg (the head Rabbi of Coral Springs). He wanted to come over to &ldquo;explain some things to me&rdquo;. He made no mention of what that meant, but he wanted to meet in person.</p>

<p>After consulting with a Rav, I made sure to record the entire meeting (with permission of course). I also invited my Dad to join the meeting, and my wife was there too.</p>

<p>The meeting, as it turned out, was about the minyan I had started.</p>

<p>The meeting lasted for over an hour. He dedicated the first 15-20 minutes or so to bad-mouthing Frank and his family. Rabbi Denburg offered to show us the reports from abuse investigators (I&rsquo;m pretty sure that&rsquo;s not really allowed), from the police, and he even had partial screen shots of text message threads between third parties.</p>

<p>He even told us that he discussed the issue at length with his advisor (who also later happened to be a judge on the Beis Din) and shared Beis Din&rsquo;s ruling. I thought this was more than a little strange that a long time advisor would be a judge in his case, but I didn&rsquo;t and still don&rsquo;t know the exact rules on the permissibility of judges.</p>

<p>Rabbi Denburg claimed all of this proved that there was no abuse and that he and the school were entirely innocent of any wrongdoing; that there could &ldquo;not possibly be any abuse&rdquo;.</p>

<p>Rabbi Denburg refused to stop until my wife, my father, and I had all pushed back asking him the relevance and demanding that he stop.</p>

<p>Rabbi Denburg claimed that I was trying to &ldquo;break the community&rdquo;, that what I was doing was &ldquo;machlokes&rdquo;, and that he even threatened to &ldquo;talk to the community&rdquo; about me and my minyan. He spoke like the stereo-typical gangster too! He actually said &ldquo;it&rsquo;s not a threat, it&rsquo;s a promise&rdquo;.</p>

<p>And here I was thinking people only said that in the movies.</p>

<p>He went on to claim members of the community as &ldquo;his members&rdquo; and &ldquo;his donors&rdquo; and that I was trying to &ldquo;steal them&rdquo; from him.</p>

<p>Most of everything I&rsquo;ve written here was brought up to Rabbi Denburg as our reasons for starting our own minyan. That our minyan wasn&rsquo;t the cause of the fracturing but a symptom.</p>

<p>We were, and still are, searching for meaning &ndash; it&rsquo;s an ongoing process. We&rsquo;re just trying to find a more meaningful way to relate with our Creator. That apparently doesn&rsquo;t matter to Rabbi Denburg.</p>

<p>We asked him directly what he wanted from us. His words: &ldquo;I don&rsquo;t want anything&rdquo;.</p>

<p>Honestly, if he had just asked us to stop we would have. We had/have no intentions of harming the community and we would rather have peace. If he had really thought it would hurt the community and just asked us without threats, we really would have stopped.</p>

<p>We would have found another way to find meaning.</p>

<h2 id="tldr">TLDR;</h2>

<p>The <a href="http://www.coralspringschabad.org">Chabad of Coral Springs</a> and it&rsquo;s associated institutions (<a href="http://www.baischaya.com">Beis Chaya</a>, <a href="https://www.edline.net/pages/Hebrew_Academy_CommunitySchool">Hebrew Academy</a>, and the <a href="http://www.mesivtacs.com/templates/articlecco_cdo/aid/1506318/jewish/Contact-Us.htm">Mesifta</a>) are run by a wanna-be gangster that threatens his opponents and thinks he can do whatever he wants to whomever he wants.</p>

<p>This community and it&rsquo;s leaders have lost touch with the ideals of Chabad as I understand them: warmth, love, and joy. I&rsquo;m ashamed that it took me this long to realize it.</p>

<p>I&rsquo;ve been hosting the minyan at my house ever since Shavuous and I&rsquo;d like to continue doing it. I&rsquo;ve considered formalizing the minyan a little bit, maybe forming a Shteibl and raising money for kiddushes, a building, or a mikvah.</p>

<p>I don&rsquo;t know if having a completely separate minyan is the solution to the issues within the Coral Springs Jewish community.</p>

<p>I don&rsquo;t know if there <em>is</em> a solution, but I have to at least try <em>something</em>.</p>

    <hr class="ookiaks" />
  </article>


  <article >
    <h1>
      <a href="https://www.ryanfaerman.com/post/branch-specific-database-in-rails/">Branch Specific Databases in Rails</a>
    </h1>
    

<p>If you&rsquo;ve worked on a Rails project for any length of time and you use feature branches (you really should be), you quickly run into migrations &ldquo;leaking&rdquo; across your git branches.</p>

<p>Sometimes it isn&rsquo;t a big deal, a missing field here, an extra field there &ndash; you learn to ignore errors. This is a bad idea, since then you&rsquo;ll just dismiss the important errors too.</p>

<p>A technique I&rsquo;ve started using (and I&rsquo;m not the only one) is to use branch specific database tables. It&rsquo;s exactly what it sounds like: every feature branch has its own database.</p>

<p>What&rsquo;s different about the way I&rsquo;ve solved this problem from others, is that branching the database is entirely optional. If you want to start working on a branched database, you just <code>rake db:branch</code> and when you&rsquo;re done, you can <code>rake db:unbranch</code> to clean it up.</p>

<p>Plus, if you&rsquo;re not really working with migrations or just don&rsquo;t want the hassle of branching your database, just don&rsquo;t run the rake commands and the default rails pattern of <code>APPLICATION_ENVIRONMENT</code> gets used.</p>

<h2 id="installing-dependencies">Installing Dependencies</h2>

<p>The class below doesn&rsquo;t have any external dependencies beyond Rails. Even if you don&rsquo;t use Rails, it&rsquo;d be pretty simple to modify it to suit your needs.</p>

<p>I throw this into <code>/lib</code> since it isn&rsquo;t really project specific and I already have my lib directory auto-loading.</p>

<p>This only works for MySQL. If you&rsquo;re using another ActiveRecord-supported database server, you&rsquo;ll have to change <code>#existing_databases</code> to something that will spit out the list of databases.</p>

<pre><code class="language-ruby">class BranchedDatabase
  def self.name(*args)
    new.name(*args)
  end

  def current_branch
    `git branch | grep &quot;*&quot;`.chomp.split.last.parameterize
  end

  def existing_databases
    if ENV['DB_PASSWORD'].present?
      password = &quot;-p#{ENV['DB_PASSWORD']}&quot;
    end
    `mysql -u #{ENV['DB_USER']} #{password} -h #{ENV['DB_HOST']} -e \&quot;show databases\&quot;`.chomp.split
  end

  def name(prefix: application_name, separator: '_')
    branch_database = [prefix, current_branch].join(separator)
    if existing_databases.include?(branch_database)
      branch_database
    else
      [prefix, Rails.env].join(separator)
    end
  end

  def application_name
    Rails.application.class.name.split('::').first.downcase
  end
end
</code></pre>

<h2 id="updating-database-yml">Updating database.yml</h2>

<p>With the prerequisites in place, it&rsquo;s time to modify the <code>database.yml</code> to use the detected branch name.</p>

<pre><code class="language-yml">development:
  database:  &lt;%= BranchedDatabase.name %&gt;
test:
  &lt;&lt;: *defaults
  database: myApplication_test
production:
  &lt;&lt;: *defaults
  database:  myApplication_production
</code></pre>

<p>Even though I <em>could</em> use the branched naming scheme for the production environment, I prefer to be explicit here.</p>

<h2 id="rake-to-the-rescue">Rake to the Rescue</h2>

<p>Since the branching feature is optional it opens an interesting can of worms. The standard rake tasks for the database won&rsquo;t work because <code>BranchedDatabase.name</code> returns the branched name <em>only</em> if the database exists. It doesn&rsquo;t yet&hellip; because we haven&rsquo;t created the database yet.</p>

<p>It&rsquo;s your classic Catch 22.</p>

<p>Instead of relying on the supplied database rake tasks, I reach into what these tasks are doing behind the scenes (sadly, this ties it to Rails 4.1 or so) and use the task classes directly.</p>

<pre><code class="language-ruby">namespace :db do
  desc 'Create branch specific database and load db/schema.rb'
  task :branch =&gt; :environment do
    [:development, :test].each do |env|
      config = ActiveRecord::Base.configurations.values_at(env.to_s).first

      if env == :development
        bdb = BranchedDatabase.new
        config['database'] = [bdb.application_name, bdb.current_branch].join('_')
      end

      ActiveRecord::Tasks::DatabaseTasks.create(config)
      ActiveRecord::Base.establish_connection(env)

      if env == :test
        ActiveRecord::Schema.verbose = false
      end
      ActiveRecord::Tasks::DatabaseTasks.load_schema
    end
  end

  desc 'Remove the branch specific database'
  task :unbranch =&gt; 'branch:remove'

  namespace :branch do
    task :remove =&gt; :drop

    desc 'Remove then Create the branch specific database'
    task :reset =&gt; [:remove, :branch]
  end
end
</code></pre>

<p>It&rsquo;s important to note what the rake tasks <em>do not</em> do: any sort of error checking. If you&rsquo;re in a different branch (like develop) and execute <code>rake db:unbranch</code> you will drop your development database.</p>

<p>You&rsquo;re a big boy developer, you don&rsquo;t need your hand held &ndash; don&rsquo;t be stupid and you&rsquo;ll be okay.</p>

<h2 id="getting-to-work">Getting to Work</h2>

<p>With that, we&rsquo;re done - just a matter of using it.</p>

<pre><code class="language-bash">git checkout -b feature/new-feature-branch
bin/rake db:branch
...
git push -u origin feature/new-feature-branch
...
bin/rake db:unbranch
git checkout develop
git branch -d feature/new-feature-branch
</code></pre>

<p>Happy Hacking!</p>

    <hr class="ookiaks" />
  </article>


  <article >
    <h1>
      <a href="https://www.ryanfaerman.com/post/gate-insecurity/">Gate (In)security</a>
    </h1>
    <p>About a month ago, my wife and I moved to a new apartment (technically, it&rsquo;s a condominium that we&rsquo;re renting). It&rsquo;s a gated community complete with RFID access cards and one of those boxes where visitors dial a code to ask us to let them through the gate. Thankfully, the gate isn&rsquo;t tied to a landline and can be associated with a cell phone - it&rsquo;s very modern.</p>

<p>There are a couple shortcomings with the system: you only can connect one number and you can&rsquo;t (or rather, the management office won&rsquo;t) setup a generic access code to give to friends and family. The former is a minor, manageable annoyance; it has been manageable thus far but it is far from ideal. The latter issue is more (but not much more) of a challenge.</p>

<p>My wife and I are observant jews, and as such, keep shabbat and don&rsquo;t answer the phone. We often have guests (some do and some don&rsquo;t keep shabbat) for the shabbat meals and this gate situation was really hampering our style.</p>

<p>Enter <a href="http://www.twilio.com/">Twilio</a>.</p>

<p>Twilio provides an API to programmatically handle phone calls and text messages; after a quick signup and a few lines of <a href="http://www.twilio.com/docs/api/twiml">TwiML</a>, I had a phone number that picks up a call and &ldquo;dials&rdquo; the code to open the gate.  If I so desired, with a few lines of ruby code, I can have an access control system that I manage.</p>

<p>I can understand the position of the HOA office. I wouldn&rsquo;t want to open the pandora&rsquo;s box of supporting an access code management system beyond what is currently in place and I certainly wouldn&rsquo;t want to deal with supporting a self-service system either. That being said, I wish they would have given us a general access code (even if they told us not to share it), obviating my need to bypass the security system entirely. My wife requested such a code and, only after a decent amount of convincing, they would only give us a 24 hour code as a rare exception.</p>

<p>The ease that I can bypass the &ldquo;security&rdquo; of our gated community just goes to show how little security it provided in the first place.  Despite giving the appearance and (false) sense of security, I suppose that the true purpose of the gate traffic control, not access control and that true security, as always, is up to everyone using the system.</p>

    <hr class="ookiaks" />
  </article>


  <article >
    <h1>
      <a href="https://www.ryanfaerman.com/post/building-a-boxing-gym/">Building a Boxing Gym</a>
    </h1>
    

<p>For a handful of reasons, my Dad decided that a punching bag in the garage wouldn&rsquo;t be such a bad idea. Since I have a pretty decent background in martial arts, I acted as the consultant for this project.</p>

<p>My martial arts background is mostly with Muay Thai and Krav Maga over standard boxing, so the setup we went with reflects that. We went with an MMA sized heavy bag since Ayelet and I both enjoy kicking the bag (we&rsquo;ll be moving closer to my parent&rsquo;s house in June, so this saves us gym membership). I find leg strikes to be a great workout that&rsquo;s unlike anything else and wanted the equipment to allow for it.</p>

<p>Movement is very important so we didn&rsquo;t get a steel tube bag stand, since it&rsquo;s difficult (or impossible) to move all the way around the bag. Using a stand also prevents a partner from getting behind the bag and holding it which is pretty helpful when working certain techniques.</p>

<p>By the end of the day, we had an MMA sized heavy bag hanging from the ceiling, with MMA mats forming a nice workable area around it, and a clean, open garage to work in. We went with <a href="http://www.titleboxing.com/">Title</a> equipment all the way around since their stuff is some of the best available and their customer service is pretty good too.</p>

<h2 id="phase-1-clear-the-pinball-machines">Phase 1: Clear the Pinball Machines</h2>

<p>My dad had five pinball machines in the garage. His favorite machines were in the game room, inside the house, and these garage machines didn&rsquo;t get played as much. We needed the space, so these needed to be packed up and moved to storage.</p>

<p>If you&rsquo;ve never moved or packed a pinball machine, let me tell you, it&rsquo;s heavy work. Each machine weighs 300-400 pounds and, when using a regular truck, you have to get that weight up into the bed; the bed is easily 4.5 feet off the ground. You also have to get it off that truck bed gently, otherwise you&rsquo;re likely to break something.</p>

<p>This was done two at a time - pretty much all that could fit comfortably in the bed.</p>

<p>With the pinball machines out of the way, we could pull all the extra wood and other junk that had accumulated out of the garage. This mostly came from the leftovers from projects since the last time the garage was cleaned. With the freshly collected garage junk and some junk we pulled from the storage unit, we could finally make a run to the dump.</p>

<p>The trash was out of the way and space was reclaimed from the pinball machines, so we could move into Phase 2.</p>

<h2 id="phase-2-organize-prepare">Phase 2: Organize &amp; Prepare</h2>

<p>To maximize space in the garage while the pinball machines were there, my Dad built what my Mom nicknamed coffins. These were just large black boxes on casters made of plywood that were sized to fit directly under the machines. Since the machines were gone, the coffins would need to go too.</p>

<p>We put together a shelving unit and re-organized the garage aiming to clear as much floor space as possible. The contents of two coffins barely used three shelves after some minor purging of anything no longer needed.</p>

<p>With everything cleaned up and organized, we could unpack the heavy bag and its hardware to double check any parts we&rsquo;d need from the hardware store. We planned on picking up some lumber to fabricate the mount which would be spanning several ceiling joists and it never hurts to double check everything. Other than the lumber, we just needed some quick links to shorten the top chains and connect the floor D-ring.</p>

<p>Dinner time was rapidly approaching, so after a quick jaunt to the hardware store, we took a break to grill up some burgers; we could move on to Phase 3 afterwards.</p>

<h2 id="phase-3-mount-hang">Phase 3: Mount &amp; Hang</h2>

<p>Finally, the long awaited time was upon us - we could fabricate the mount and hang the heavy bag. The mount is a pretty simply design, it&rsquo;s just a 2x10 extending from a 2x6 which would span several joists. 100 pounds hanging over a single joist isn&rsquo;t too much a big deal; but hanging over more is better.</p>

<p>After spending what a pretty decent amount of time getting the mount into place and through a hole in the ceiling - it was done. The mount was installed. The only evidence (after cleaning all the insulation and sheetrock bits) that we actually did anything being an eye-bolt through the middle of the ceiling.</p>

<p>Despite being called a &ldquo;heavy bag&rdquo;, it isn&rsquo;t really very heavy. I was able to easily pick it up while my Dad attached it to the ceiling mount and got the chains handled. We used some quick links to &ldquo;short-circuit&rdquo; the hanging chains to bring it a little higher off the floor.</p>

<p>With the top mount complete, it was time for the floor mount. A hammer drill, masonry bit, and a few tapcons made quick work of the floor mount which then was quickly attached to the bag.</p>

<p>After a long day&rsquo;s work, the bag was fully mounted and it was time for a few test blows. Thankfully, the ceiling mount was fairly solid and it all worked just fine. As a finishing touch, it was time to put down some MMA mats to make things a little more comfortable as I like training bare foot. These went down fairly quickly, and it was straight-forward to get it all looking great.</p>

<p><img src="//www.ryanfaerman.com/assets/img/heavy_bag_ryan.jpg" alt="Ryan Faerman standing next to the heavy bag" /></p>

<h2 id="conclusion">Conclusion</h2>

<p>The bag is up and pretty solid. My Dad purchased a fairly nice interval timer which will help with some of the training I have planned. There&rsquo;s also some focus mitts for working technique 1-on-1 when the bag isn&rsquo;t appropriate</p>

<p>All said and done, we have the start to a pretty solid Boxing/Muay Thai gym that we should get plenty of enjoyment for a pretty good time.</p>

    <hr class="ookiaks" />
  </article>


  <article >
    <h1>
      <a href="https://www.ryanfaerman.com/post/upgrading-my-centos-server/">Upgrading my CentOS Server</a>
    </h1>
    

<p>My main server has been growing rather long in the tooth (CentOS 5.3) and until recently, I&rsquo;ve been putting off actually doing something about it, since I&rsquo;m just lazy. There were always a few &ldquo;essential&rdquo; domains and services that I couldn&rsquo;t risk going down and until recently, I just accepted that &ndash; Until I couldn&rsquo;t anymore; A few things forced my hands.</p>

<ol>
<li>Nginx doesn&rsquo;t really operate well with CentOS 5.3; I couldn&rsquo;t get it to run at all.</li>
<li>Node.js started giving me issues with all the various cruft and versions of it that I&rsquo;ve experimented with over the years.</li>
<li>I kinda, sorta deleted my entire <code>sites</code> directory (I had backups!) which made me notice all the junk I&rsquo;ve had in my trunk as I restored things.</li>
</ol>

<p>Despite having less time than ever to spend on my server, I actually have less worries about things now than before, due, in part, to moving some of my critical DNS and such to Amazon Web Services. My website, for example, is hosted on S3 and generated on my end with Jekyll; I&rsquo;ve moved the DNS for my primary domains to Amazon&rsquo;s Route 53 (it has a 100% uptime SLA!). The only downside of hosting my domain on S3, is that you can&rsquo;t point a naked domain to your S3 bucket; which means I still need my server to do a simple redirect from <code>ryanfaerman.com</code> to <code>www.ryanfaerman.com</code>. I also can&rsquo;t go without the dub-dubs, but the benefits far outweight the downsides here.</p>

<p>Enough introduction, on to the meat and potatoes.</p>

<h2 id="backup-all-the-things">Backup all the things!</h2>

<p>Backing up is probably the most important step.</p>

<p>The things that I backed up before doing this potentially catastrophic system upgrade were:</p>

<ul>
<li>Home directories. Pretty much everything in /home</li>
<li>Website directories. I had just about everything in /var/html/sites.</li>
<li>Any and all databases. I had both MySQL and MongoDB running.</li>
<li>Some old Subversion repositories. I&rsquo;m all moved to git now, but history remains.</li>
<li>Apache, and a few other extraneous config files</li>
</ul>

<p>I created tarballs or dumps where appropriate, downloaded them locally, then uploaded a copy to S3. I&rsquo;ll be keeping these backups there for a month or two - basically until I know things are stable enough.</p>

<h2 id="upgrade-all-the-things">Upgrade all the things!</h2>

<p>With backups out of the way and my mind mostly at ease, its time to run the monster command that starts this whole adventure rolling:</p>

<pre><code>yum update
</code></pre>

<p>Of course that hit a quick snag. Yum failed with a bunch of nasty error messages as soon as it hit updating some perl stuff. A quick search later, and I <a href="http://blog.rowancrane.com/2009/05/13/yum-update-typeerror-unsubscriptable-object">discovered</a> that this is a fairly common error that is easily resolved.</p>

<pre><code>yum clean metadata
</code></pre>

<p>After that, I ran <code>yum update</code> again and after a few minutes, I was asked to confirm a 400+ megabyte download. Once that finishes its thing, it is time for one of the scariest commands: <code>reboot</code>. Giving the server 5 minutes or so to reboot (and being just slightly nervous), I give it a quick ping and it&rsquo;s back.</p>

<h2 id="installing-all-the-things">Installing all the things!</h2>

<p>While I&rsquo;ve gotten everything setup by manually building &amp; configuring each service (I did take notes for this post, but they are verbose, boring, and soon to be outdated), I&rsquo;m learning to use <a href="http://www.opscode.com/chef/">Chef</a> to take care of it all in the future. Chef can also be used with <a href="http://vagrantup.com/">Vagrant</a>, a really slick VM provisioning tool that I&rsquo;m looking to use as a development server. Setting up my mac isn&rsquo;t too much of a challenge, but it will let me switch machines a little faster and make collaboration easier.</p>

<p>Chef <em>should</em> make everything much simpler and easier to replicate when required and gives me much more flexibility should I ever decide to use something like Amazon EC2 (which I am considering).</p>

<p>Even though <a href="https://github.com/mislav/git-deploy">git-deploy</a> to push my various projects live, I&rsquo;ve been using <a href="http://www.capistranorb.com/">Capistrano</a> at work, and have really grown to enjoy using it. I&rsquo;ll likely move my projects to use it after dealing with the server stuff.</p>

    <hr class="ookiaks" />
  </article>





<section id="continued-posts">
  <h3>Older Posts</h3>
  <ul class="articles">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/the-setup/">The Setup 2012</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/colophon/">Colophon</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/favorite-software/">Favorite Software</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/24-words/">24 Words</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/decapitation-at-virgina-tech/">Decapitation at Virgina Tech</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/ajax-uploading/">AJAX Uploading</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/4d-systems-touch-display/">4D Systems Touch Display</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/knight-rider-lights/">Knight Rider Lights</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/knight-rider-mark-ii/">Knight Rider Mark II</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/tefillin-straps/">Tefillin Straps</a>
      </li>
      
    
      
      <li>
        <a href="https://www.ryanfaerman.com/post/php-twitter-search/">PHP Twitter Search API</a>
      </li>
      
    
  </ul>
</section>


  <footer id="footer">
    <p>Copyright &copy; Ryan Faerman</p>
  </footer>
  <script type="text/javascript" src="https://www.ryanfaerman.com/main.js"></script>

</body>
</html>

